<h2 id="tenant">Tenant</h2><p>Stormpath is a multi-tenant software service. When you <a href="https://api.stormpath.com/register">sign up for Stormpath</a>, a private data ‘space’ is created for you. This space is represented as a <code>Tenant</code> resource.</p><p>It might help to think of a <code>Tenant</code> as a Stormpath customer. As a Stormpath Tenant (customer), you own your Tenant resource and everything in it – <a href="application">Applications</a>, <a href="directory">Directories</a>, <a href="account">Accounts</a>, <a href="group">Groups</a>, and so on.</p><p>In the Stormpath SDK specifically, your <code>Tenant</code> resource can be thought of as your global starting point. You can access everything in your tenant space by accessing your tenant instance first and then interacting with its other linked resources (applications collection, directories collection, etc).</p><p><strong>Since</strong>: 0.1</p><hr><p><a name="createApplication"></a></p><h3 id="-span-class-member-method-span-createapplication-application-options-callback-"><span class="member">method</span> createApplication(application, <em>[options,]</em> callback)</h3><p>Creates a new <a href="application">Application</a> within the tenant.</p><h4 id="usage">Usage</h4><p>Create a new Application with its own private Directory so you can start adding user accounts right away:</p><pre><code class="lang-javascript">var app = { name: &#39;My Awesome App&#39;, description: &#39;Srsly. Awesome.&#39; };

tenant.createApplication(app, { createDirectory: true }, function(err, app) {
    console.log(app);
});</code></pre><p>Create a new Application without any mapped user account stores. You are responsible for adding account stores later if you want to be able to create new user accounts via the application directly. Notice there is no <em>options</em> param:</p><pre><code class="lang-javascript">var app = { name: &#39;My Awesome App&#39;, description: &#39;Srsly. Awesome.&#39; };

tenant.createApplication(app, function(err, app) {
  console.log(app);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>application</code><td><code>object</code><td>required<td>The application&#39;s name/value fields.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as <a href="http://docs.stormpath.com/rest/product-guide/#create-an-application-aka-register-an-application-with-stormpath">query parameters</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon server response. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the newly created <a href="application">Application</a> resource returned from the server.</table><h4 id="returns">Returns</h4><p>void; the created <code>Application</code> returned from the server will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="createDirectory"></a></p><h3 id="-span-class-member-method-span-createdirectory-directory-options-callback-"><span class="member">method</span> createDirectory(directory, <em>[options,]</em> callback)</h3><p>Creates a new <a href="directory">Directory</a> within the tenant.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">var app = { name: &#39;Employees Directory&#39;, description: &#39;Only Employee accounts in here please.&#39; };

tenant.createApplication(app, function(err, app) {
  console.log(app);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>directory</code><td><code>object</code><td>required<td>The directory&#39;s name/value fields.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, to <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">expand</a> any of the returned directory&#39;s linked resources.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon server response. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the newly created <a href="directory">Directory</a> resource returned from the server.</table><h4 id="returns">Returns</h4><p>void; the created <code>Directory</code> returned from the server will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getApplications"></a></p><h3 id="-span-class-member-method-span-getapplications-options-callback-"><span class="member">method</span> getApplications(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of tenant <a href="application">Application</a>s and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the tenant&#39;s applications are retrieved. If options (query parameters) are specified for a search, only those applications matching the search will be retrieved. If the search does not return any results, the collection will be empty.</p><h4 id="usage">Usage</h4><p>If you want to retrieve <em>all</em> of the tenant&#39;s applications:</p><pre><code class="lang-javascript">tenant.getApplications(function(err, applications) {
  applications.each(function(app, cb) {
    console.log(&#39;app:&#39;, app);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over apps.&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">collection</a> provided to the <code>callback</code> has an <a href="collectionResource#each">each function</a> that accepts another callback. The collection will iterate over all of the applications in the collection, and invoke the callback for each one. The <code>offset</code> parameter indicates the index of the application in the returned collection. The <code>offset</code> parameter is optional - it may be omitted from the callback definition.</p><p>If you don&#39;t want all applications, and only want specific ones, you can search for them by specifying the <em>options</em> argument with <a href="http://docs.stormpath.com/rest/product-guide/#tenant-applications-search">application search</a> query parameters:</p><pre><code class="lang-javascript">tenant.getApplications({ name: &#39;*Awesome*&#39; }, function(err, applications) {
  applications.each(function(app, cb) {
    console.log(app);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over applications.&#39;);
  });
});</code></pre><p>The above code example would only print out applications with the text fragment <code>Awesome</code> in their name. See the Stormpath REST API Guide&#39;s <a href="http://docs.stormpath.com/rest/product-guide/#tenant-applications-search">application search documentation</a> for other supported query parameters, such as reference expansion.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#application-retrieve">resource expansion</a> or for <a href="http://docs.stormpath.com/rest/product-guide/#tenant-applications-search">searching for applications</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">CollectionResource</a> containing zero or more <a href="application">Application</a> resource instances.</table><h4 id="returns">Returns</h4><p>void; the retrieved collection of <code>Application</code>s will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getCustomData"></a></p><h3 id="-span-class-member-method-span-getcustomdata-options-callback-"><span class="member">method</span> getCustomData(<em>[options,]</em> callback)</h3><p>Retrieves the <a href="customData">CustomData</a> resource of the <code>Tenant</code> and provides it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">tenant.getCustomData(function(err, customData) {
  console.log(customData);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>An object literal of name/value pairs to use as query parameters, for example, <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="customData">CustomData</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>CustomData</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getDirectories"></a></p><h3 id="-span-class-member-method-span-getdirectories-options-callback-"><span class="member">method</span> getDirectories(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of [tenant <a href="directory">Directories</a> and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the tenant&#39;s directories are retrieved. If options (query parameters) are specified for a search, only those directories matching the search will be retrieved. If the search does not return any results, the collection will be empty.</p><h4 id="usage">Usage</h4><p>If you want to retrieve <em>all</em> of the tenant&#39;s directories:</p><pre><code class="lang-javascript">tenant.getDirectories(function(err, directories) {
  directories.each(function(dir, cb) {
    console.log(&#39;dir:&#39;, dir);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over directories.&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">Collection</a> provided to the <code>callback</code> has an <a href="collectionResource#each">each function</a> that accepts another callback. The collection will iterate over all of the directories in the collection, and invoke the callback for each one. The <code>offset</code> parameter indicates the index of the directory in the returned collection. The <code>offset</code> parameter is optional - it may be omitted from the callback definition.</p><p>If you don&#39;t want all directories, and only want specific ones, you can search for them by specifying the <em>options</em> argument with <a href="http://docs.stormpath.com/rest/product-guide/#tenant-directories-search">directory search</a> query parameters:</p><pre><code class="lang-javascript">tenant.getDirectories({ name: &#39;*foo*&#39; }, function(err, directories) {
  directories.each(function(dir, cb) {
    console.log(&#39;dir:&#39;, dir);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over directories.&#39;);
  });
});</code></pre><p>The above code example would only print out directories with the text fragment <code>foo</code> in their name. See the Stormpath REST API Guide&#39;s <a href="http://docs.stormpath.com/rest/product-guide/#tenant-directories-search">directory search documentation</a> for other supported query parameters, such as reference expansion.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#retrieve-a-directory">resource expansion</a> or for <a href="http://docs.stormpath.com/rest/product-guide/#tenant-directories-search">searching for directories</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">collection</a> containing zero or more <a href="directory">Directory</a> resources.</table><h4 id="returns">Returns</h4><p>void; the retrieved collection of <code>Directory</code> resources will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="verifyAccountEmail"></a></p><h3 id="-span-class-member-method-span-verifyaccountemail-token-callback-"><span class="member">method</span> verifyAccountEmail(token, callback)</h3><p>Verifies an account-specific email verification token, obtaining the verified <a href="account">Account</a> and providing it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><p>Obtain the email verification token from a request and specify that as the <code>token</code> argument. This value is usually obtained as an <code>sptoken</code> query parameter value for a request sent to your web application. For example, <code>https://www.yourapplication.com/verifyEmail?sptoken=SoMeRaNDomVaLUe</code>:</p><pre><code class="lang-javascript">
var token = request.query.sptoken;

tenant.verifyAccountEmail(token, function(err, verifiedAccount) {
  console.log(verifiedAccount);
});</code></pre><p>See the Stormpath Product Guide&#39;s section on <a href="http://docs.stormpath.com/rest/product-guide/#account-verify-email">account email verification</a> for more information.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>token</code><td><code>string</code><td>required<td>The account email verification, usually obtained as an <code>sptoken</code> query parameter value for a request sent to your web application. For example, <code>https://www.yourapplication.com/verifyEmail?sptoken=SoMeRaNDomVaLUe</code>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the validated <a href="account">Account</a>.</table><h4 id="returns">Returns</h4><p>void; the retrieved validated <a href="account">Account</a> will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p>
