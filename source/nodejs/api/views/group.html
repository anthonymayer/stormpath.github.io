<h2 id="group">Group</h2><p>A <code>Group</code> is a collection of <a href="account">Account</a>s within a <a href="directory">Directory</a> that are often used for authorization and access control in an <a href="application">Application</a>. In Stormpath, the term Group is synonymous with &#39;Role&#39;.</p><p>For example, an application will often check which groups are assigned to an account, and perform access control decisions based on which groups the account has or not.</p><p>An <code>Group</code> resource have predefined fields that are useful to many <code>Applications</code>, but you are likely to have your own custom data that you need to associate with a <code>group</code> as well. You can create your own custom data fields when creating <code>group</code> with <a href="application#createGroup">application.createGroup</a> or <a href="directory#createGroup">directory.createGroup</a>. A <code>customData</code> can be updated as part of <code>group</code> resource or as a separate resource via <code>getCustomData</code> method.</p><p><strong>Since</strong>: 0.1</p><hr><p><a name="addAccount"></a></p><h3 id="-span-class-member-method-span-addaccount-accountoraccounthref-options-callback-"><span class="member">method</span> addAccount(accountOrAccountHref, <em>[options,]</em> callback)</h3><p>Adds the specified <a href="account">Account</a> to the group. The account must have already been persisted - new accounts cannot be created via this method.</p><h4 id="usage">Usage</h4><p>You may specify an account directly:</p><pre><code class="lang-javascript">group.addAccount(account, function(err, membership) {
  console.log(membership);
});</code></pre><p>Or just an account&#39;s <code>href</code>:</p><pre><code class="lang-javascript">group.addAccount(accountHref, function(err, membership) {
  console.log(membership);
});</code></pre><p>In both cases, the <a href="groupMembership">GroupMembership</a> representing the group-to-account association will be provided to the callback as the callback&#39;s second parameter. You can obtain either the group or the account via <code>membership.group</code> or &#39;membership.account`, respectively.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>accountOrAccountHref</code><td><code>object</code> or <code>string</code><td>required<td>Either a previously-persisted <a href="account">Account</a> resource or the <code>href</code> string of a previously-persisted account.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for returned resource reference expansion.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon server response. The 1st parameter is an <a href="resourceError">error</a>. The 2nd parameter is the <a href="groupMembership">GroupMembership</a> that reflects the group-to-account association. You can obtain either the group or the account via <code>membership.group</code> or &#39;membership.account`, respectively.</table><h4 id="returns">Returns</h4><p>void; If the association fails, the callback&#39;s first parameter (<code>err</code>) will report the failure. If the association succeeds, the <a href="groupMembership">GroupMembership</a> will be provided to the <code>callback</code> as the callback&#39;s second parameter. You can obtain either the group or the account via <code>membership.group</code> or &#39;membership.account`, respectively.</p><hr><p><a name="getAccounts"></a></p><h3 id="-span-class-member-method-span-getaccounts-options-callback-"><span class="member">method</span> getAccounts(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of the groups&#39;s assigned <a href="account">Account</a>s and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the groups&#39;s accounts are retrieved. If options (query parameters) are specified for a search, only those accounts matching the search will be retrieved. If the search does not return any results, the collection will be empty.</p><h4 id="usage">Usage</h4><p>If you want to retrieve <em>all</em> of the group&#39;s accounts:</p><pre><code class="lang-javascript">group.getAccounts(function(err, accounts) {
  accounts.each(function(account, cb) {
    console.log(&#39;account:&#39;, account);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over accounts&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">Collection</a> provided to the <code>callback</code> has an <code>each</code> function that accepts its own callback. The collection will iterate over all of the accounts in the collection, and invoke the callback for each one. The <code>offset</code> parameter indicates the index of the account in the returned collection. The <code>offset</code> parameter is optional - it may be omitted from the callback definition.</p><p>If you don&#39;t want all accounts, and only want specific ones, you can search for them by specifying the <em>options</em> argument with <a href="http://docs.stormpath.com/rest/product-guide/#group-accounts">group account</a> search query parameters:</p><pre><code class="lang-javascript">group.getAccounts({ username: &#39;*foo*&#39; }, function(err, accounts) {
  accounts.each(function(account, cb) {
    console.log(&#39;account:&#39;, account);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over accounts.&#39;);
  });
});</code></pre><p>The above code example would only print out group accounts with the text fragment <code>foo</code> in the username. See the Stormpath REST API Guide&#39;s <a href="http://docs.stormpath.com/rest/product-guide/#group-accounts">group account documentation</a> for other supported query parameters, such as reference expansion.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#group-accounts">group account</a> search or reference expansion.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">collection</a> containing zero or more <a href="account">Account</a> resources.</table><h4 id="returns">Returns</h4><p>void; the retrieved collection of <code>Account</code>s will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getAccountMemberships"></a></p><h3 id="-span-class-member-method-span-getaccountmemberships-options-callback-"><span class="member">method</span> getAccountMemberships(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of the groups&#39;s <a href="groupMembership">membership</a>s and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the groups&#39;s membership entities are retrieved. If options (query parameters) are specified for expansion, the returned memberships will have references expanded as necessary.</p><h4 id="usage">Usage</h4><p>If you want to retrieve all of the group&#39;s memberships/associations:</p><pre><code class="lang-javascript">group.getAccountMemberships(function(err, memberships) {
  memberships.each(function(membership, cb) {
    console.log(&#39;membership:&#39;, membership);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over memberships.&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">Collection</a> provided to the <code>callback</code> has an <code>each</code> function that accepts its own callback. The collection will iterate over all of the memberships in the collection, and invoke the callback for each one. The <code>offset</code> parameter indicates the index of the membership in the returned collection. The <code>offset</code> parameter is optional - it may be omitted from the callback definition.</p><p>If you want the returned memberships to have their accounts expanded (so you can access the membership and its associated account), you can specify an <code>expand</code> query parameter:</p><pre><code class="lang-javascript">group.getAccountMemberships({ expand: &#39;account&#39; }, function(err, memberships) {
  memberships.each(function(membership, cb) {
    console.log(&#39;membership:&#39;, membership);

    //the membership&#39;s &#39;account&#39; property will be available immediately:
    console.log(membership.account);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over account memberships.&#39;);
  });
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for reference expansion.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">collection</a> containing zero or more <a href="groupMembership">membership</a> resources.</table><h4 id="returns">Returns</h4><p>void; the retrieved <a href="collectionResource">collection</a> of the group&#39;s memberships will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getDirectory"></a></p><h3 id="-span-class-member-method-span-getdirectory-options-callback-"><span class="member">method</span> getDirectory(<em>[options,]</em> callback)</h3><p>Retrieves the group&#39;s parent <a href="directory">Directory</a> and provides it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">group.getDirectory(function(err, directory) {
  console.log(directory);
});</code></pre><p>You can also use <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a> options (query params) to obtain linked resources in the same request:</p><pre><code class="lang-javascript">group.getDirectory({ expand:&#39;accounts&#39; }, function(err, directory) {
  console.log(directory);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="directory">Directory</a> resource.</table><h4 id="returns">Returns</h4><p>void; the retrieved <a href="directory">Directory</a> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getTenant"></a></p><h3 id="-span-class-member-method-span-gettenant-options-callback-"><span class="member">method</span> getTenant(<em>[options,]</em> callback)</h3><p>Retrieves the group&#39;s owning <a href="tenant">Tenant</a> and provides it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">group.getTenant(function(err, tenant) {
  console.log(tenant);
});</code></pre><p>You can also use <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a> options (query params) to obtain linked resources in the same request:</p><pre><code class="lang-javascript">group.getTenant({ expand:&#39;applications&#39; }, function(err, tenant) {
  console.log(tenant);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="tenant">Tenant</a> resource.</table><h4 id="returns">Returns</h4><p>void; the retrieved <code>Tenant</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getCustomData"></a></p><h3 id="-span-class-member-method-span-getcustomdata-options-callback-"><span class="member">method</span> getCustomData(<em>[options,]</em> callback)</h3><p>Retrieves the <a href="customData">CustomData</a> resource of the <code>Group</code>&#39;s assigned <code>CustomData</code> and provides it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><p>For an <code>href</code> that you know represents an account:</p><pre><code class="lang-javascript">group.getCustomData(function(err, customData) {
  console.log(customData);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>An object literal of name/value pairs to use as query parameters, for example, <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="customData">CustomData</a> resource.</table><h4 id="returns">Returns</h4><p>void; the retrieved <code>CustomData</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr>
