<h2 id="directory">Directory</h2><p>A <code>Directory</code> is a top-level storage containers of <a href="account">Account</a>s and <a href="group">Group</a>s. A Directory also manages security policies (like password strength) for the Accounts it contains.</p><p>Additionally:</p><ul><li>All <code>Account</code>s within a directory have a unique username and email address.</li><li>All <code>Group</code>s within a directory have a unique name.</li></ul><p><strong>Since</strong>: 0.1</p><hr><p><a name="createAccount"></a></p><h3 id="-span-class-member-method-span-createaccount-account-options-callback-"><span class="member">method</span> createAccount(account, <em>[options,]</em> callback)</h3><p>Creates a new <a href="account">Account</a> in the directory. Every account in the directory must have a unique <code>username</code> and a unique <code>email</code> address.</p><h4 id="usage">Usage</h4><p>Example:</p><pre><code class="lang-javascript">var account = {
  givenName: &#39;Jean-Luc&#39;,
  surname: &#39;Picard&#39;,
  username: &#39;jlpicard&#39;,
  email: &#39;jlpicard@starfleet.com&#39;,
  password: &#39;Changeme1!&#39;
};

directory.createAccount(account, function(err, createdAccount) {
  console.log(createdAccount);
});</code></pre><p>Whenever you create an <code>account</code>, an empty <code>customData</code> resource is created for that <code>account</code> automatically, but when you need to populate custom data on <code>account</code> creation you can embed <code>customData</code> directly in <code>account</code> resource.</p><pre><code class="lang-javascript"> var account = {
  givenName: &#39;Jean-Luc&#39;,
  surname: &#39;Picard&#39;,
  username: &#39;jlpicard&#39;,
  email: &#39;jlpicard@starfleet.com&#39;,
  password: &#39;Changeme1!&#39;,
  customData: {
    rank: &#39;Captain&#39;,
    birthDate: &#39;2305-07-13&#39;,
    birthPlace: &#39;La Barre, France&#39;,
    favoriteDrink: &#39;Earl Grey tea&#39;
  }
};

directory.createAccount(account, function(err, createdAccount) {
  console.log(createdAccount);
});</code></pre><p>You can also specify options to control creation behavior and things like reference expansion:</p><pre><code class="lang-javascript">// ...

var options = { registrationWorkflowEnabled: false };

directory.createAccount(account, options, function(err, createdAccount) {
  console.log(createdAccount);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>account</code><td><code>object</code><td>required<td>The account&#39;s name/value fields.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as <a href="http://docs.stormpath.com/rest/product-guide/latest/accnt_mgmt.html#add-a-new-account-to-a-directory-no-email">query parameters</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon server response. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the newly created <a href="account">Account</a> resource returned from the server.</table><h4 id="returns">Returns</h4><p>void; the created <a href="account">Account</a> returned from the server will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="createGroup"></a></p><h3 id="-span-class-member-method-span-creategroup-group-options-callback-"><span class="member">method</span> createGroup(group, <em>[options,]</em> callback)</h3><p>Creates a new <a href="group">Group</a> in the directory. Every group in the directory must have a unique <code>name</code>.</p><h4 id="usage">Usage</h4><p>Example:</p><pre><code class="lang-javascript">var group = { name: &#39;Administrators&#39; };

directory.createGroup(group, function(err, createdGroup) {
  console.log(createdGroup);
});</code></pre><p>You can also specify options to control things like reference expansion:</p><pre><code class="lang-javascript">directory.createGroup(group, { expand:&#39;directory&#39; }, function(err, createdGroup) {
  console.log(createdGroup);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>group</code><td><code>object</code><td>required<td>The group&#39;s name/value fields.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon server response. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the newly created <a href="group">Group</a> resource returned from the server.</table><h4 id="returns">Returns</h4><p>void; the created <a href="group">Group</a> returned from the server will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getAccounts"></a></p><h3 id="-span-class-member-method-span-getaccounts-options-callback-"><span class="member">method</span> getAccounts(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of the directory&#39;s <a href="account">Account</a>s and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the directory&#39;s accounts are retrieved. If options (query parameters) are specified for a search, only those accounts matching the search will be retrieved. If the search does not return any results, the collection will be empty.</p><h4 id="usage">Usage</h4><p>If you want to retrieve <em>all</em> of the directory&#39;s accounts:</p><pre><code class="lang-javascript">directory.getAccounts(function(err, accounts) {
  accounts.each(function(account, cb) {
    console.log(&#39;account:&#39;, account);
    cb();
  }, function(err) {
    console.log(&#39;Finsihed iterating over accounts.&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">Collection</a> provided to the <code>callback</code> has an <code>each</code> function that accepts its own callback. The collection will iterate over all of the accounts in the collection, and invoke the callback for each one.</p><p>If you don&#39;t want all accounts, and only want specific ones, you can search for them by specifying the <em>options</em> argument with <a href="http://docs.stormpath.com/rest/product-guide/#directory-accounts">directory account</a> search query parameters:</p><pre><code class="lang-javascript">directory.getAccounts({ username: &#39;*foo*&#39; }, function(err, accounts) {
  accounts.each(function(account, cb) {
    console.log(&#39;account:&#39;, account);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over accounts.&#39;);
  });
});</code></pre><p>The above code example would only print out directory accounts with the text fragment <code>foo</code> in the username. See the Stormpath REST API Guide&#39;s <a href="http://docs.stormpath.com/rest/product-guide/#directory-accounts">directory account documentation</a> for other supported query parameters, such as reference expansion.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#directory-accounts">directory account</a> search or reference expansion.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">collection</a> containing zero or more <a href="account">Account</a> resources.</table><h4 id="returns">Returns</h4><p>void; the retrieved collection of <code>Account</code>s will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getCustomData"></a></p><h3 id="-span-class-member-method-span-getcustomdata-options-callback-"><span class="member">method</span> getCustomData(<em>[options,]</em> callback)</h3><p>Retrieves the <a href="customData">CustomData</a> resource of the <code>Directory</code> and provides it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">directory.getCustomData(function(err, customData) {
  console.log(customData);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>An object literal of name/value pairs to use as query parameters, for example, <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="customData">CustomData</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>CustomData</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getGroups"></a></p><h3 id="-span-class-member-method-span-getgroups-options-callback-"><span class="member">method</span> getGroups(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of the directory&#39;s <a href="group">Group</a>s and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the directory&#39;s groups are retrieved. If options (query parameters) are specified for a search, only those groups matching the search will be retrieved. If the search does not return any results, the collection will be empty.</p><h4 id="usage">Usage</h4><p>If you want to retrieve <em>all</em> of the directory&#39;s groups:</p><pre><code class="lang-javascript">directory.getGroups(function(err, groups) {
  groups.each(function(group, cb) {
    console.log(&#39;group:&#39;, group);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over groups.&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">collection</a> provided to the <code>callback</code> has an <code>each</code> function that accepts its own callback. The collection will iterate over all of the groups in the collection, and invoke the callback for each one.</p><p>If you don&#39;t want all groups, and only want specific ones, you can search for them by specifying the <em>options</em> argument with <a href="http://docs.stormpath.com/rest/product-guide/#directory-groups">directory group</a> search query parameters:</p><pre><code class="lang-javascript">directory.getGroups({ name: &#39;*bar*&#39; }, function(err, groups) {
  groups.each(function(group, cb) {
    console.log(&#39;group:&#39;, group);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over groups.&#39;);
  });
});</code></pre><p>The above code example would only print out groups with the text fragment <code>foo</code> in their name. See the Stormpath REST API Guide&#39;s <a href="http://docs.stormpath.com/rest/product-guide/#directory-groups">directory group</a> documentation for other supported query parameters, such as reference expansion.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#directory-groups">directory group</a> search or reference expansion.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">collection</a> containing zero or more <a href="group">Group</a> resources.</table><h4 id="returns">Returns</h4><p>void; the retrieved collection of <code>Group</code>s will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getTenant"></a></p><h3 id="-span-class-member-method-span-gettenant-options-callback-"><span class="member">method</span> getTenant(<em>[options,]</em> callback)</h3><p>Retrieves the directory&#39;s owning <a href="tenant">Tenant</a> and provides it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">directory.getTenant(function(err, tenant) {
  console.log(tenant);
});</code></pre><p>You can also use <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a> options (query params) to obtain linked resources in the same request:</p><pre><code class="lang-javascript">directory.getTenant({ expand:&#39;applications&#39; }, function(err, tenant) {
  console.log(tenant);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="tenant">Tenant</a> resource.</table><h4 id="returns">Returns</h4><p>void; the retrieved <code>Tenant</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getProvider"></a></p><h3 id="-span-class-member-method-span-getprovider-options-callback-"><span class="member">method</span> getProvider(<em>[options,]</em> callback)</h3><p>Retrieves the directory&#39;s <code>Provider</code> information and provides it to the specified <code>callback</code>. If <code>provider</code> not set, <code>callback</code> will be called without parameters.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">directory.getProvider(function(err, provider) {
  console.log(provider);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <code>Provider</code> resource.</table><h4 id="returns">Returns</h4><p>void; the retrieved <code>Provider</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr>
