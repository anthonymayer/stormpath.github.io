<h2 id="client">Client</h2><p>A <code>Client</code> instance is your starting point for all interactions with the Stormpath REST API. Once you have a <code>Client</code> instance, you can do everything else.</p><p>You can create (<em>and customize</em>) the Stormpath client in a number of ways, but at a bare minimum you need to specify your <a href="http://docs.stormpath.com/rest/quickstart/#get-an-api-key" title="Stormpath API Key">Stormpath API Key</a> information.</p><p>You can do this in one of two ways:</p><ul><li><p>Reference your downloaded <code>apiKey.properties</code> file (<em>presumably <code>~/.stormpath/apiKey.properties</code></em>):</p><pre><code class="lang-javascript">var stormpath = require(&#39;stormpath&#39;);

// Platform agnostic way of getting the home directory.
var homeDir = process.env[(process.platform === &#39;win32&#39; ? &#39;USERPROFILE&#39; : &#39;HOME&#39;)];
var apiKeyFilePath = homeDir + &#39;/.stormpath/apiKey.properties&#39;;

// Available after the properties file is asynchronously loaded from disk.
var client;

stormpath.loadApiKey(apiKeyFilePath, function(err, apiKey) {
  client = new stormpath.Client({ apiKey: apiKey });
});</code></pre></li><li><p>Create an ApiKey object manually:</p><pre><code class="lang-javascript">var stormpath = require(&#39;stormpath&#39;);

// In this example, we&#39;ll reference the API credentials from environment
// variables (*NEVER HARDCODE API KEY VALUES IN SOURCE CODE!*).
var apiKey = new stormpath.ApiKey(
  process.env[&#39;STORMPATH_CLIENT_APIKEY_ID&#39;],
  process.env[&#39;STORMPATH_CLIENT_APIKEY_SECRET&#39;]
);

var client = new stormpath.Client({ apiKey: apiKey });</code></pre></li></ul><p><strong>Since</strong>: 0.1</p><hr><p><a name="ctor"></a></p><h3 id="-span-class-member-constructor-span-client-options-"><span class="member">constructor</span> Client(options)</h3><p>The <code>Client</code> constructor function creates a new <code>Client</code> instance according to the specified <code>options</code> argument.</p><p><code>options</code> is an object that contains at least an <code>apiKey</code> field with an <a href="apiKey">ApiKey</a> object. An <code>ApiKey</code> is required for all Client communication to the Stormpath service.</p><h4 id="usage">Usage</h4><p>You must <code>require(&#39;stormpath&#39;)</code> to access the constructor function:</p><pre><code class="lang-javascript">var stormpath = require(&#39;stormpath&#39;);

var options = {...};

var client = new stormpath.Client(options);</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>options</code><td><code>object</code><td>required<td>Options object that must have at least an <code>apiKey</code> field.<tr><td><code>options.baseUrl</code><td><code>string</code><td>optional<td>The base URL for the Stormpath API. The default is <code>https://api.stormpath.com/v1</code>. Shared Enterprise Cloud customers should use <code>https://enterprise.stormpath.io/v1</code>. Private deployments should use their custom base URL.<tr><td><code>options.cacheOptions</code><td><code>object</code><td>optional<td>See &quot;Cache options parameters&quot; below for details.<tr><td><code>options.nonceStore</code><td><code>object</code><td>optional<td>See &quot;Custom Nonce Store&quot; below for details.</table><hr><h3 id="caching">Caching</h3><p>The caching mechanism enables you to store the state of an already accessed resource in a cache store.</p><p>If you access the resource again and the data inside the cache hasn&#39;t yet expired, you would get the resource directly from the cache store.</p><p>By doing so, you can reduce network traffic and still have access to some of the resources even if there is a connectivity problem with <code>Stormpath</code>.</p><p>Be aware, however, that when using a persistent cache store like <a href="http://redis.io/" title="Redis">Redis</a>, if the data changes quickly on <code>Stormpath</code> and the <code>TTL</code> and <code>TTI</code> are set to a large value, you may get resources with attributes that don&#39;t reflect the actual state.</p><p>If this edge case won&#39;t affect your data consistency, you can use the caching mechanism by providing an additional parameter when creating the <code>Client</code> instance:</p><pre><code class="lang-javascript">var cacheOptions = {
  store: &#39;redis&#39;,
  connection: {
    host: &#39;localhost&#39;,
    port: 6379,
  },
  options: {
    // redis client options (username, password, etc.)
  },
  ttl: 300,
  tti: 300
};

var client = new stormpath.Client({
  apiKey: apiKey,
  cacheOptions: cacheOptions
});</code></pre><h3 id="cache-options-parameters">Cache options Parameters</h3><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>store</code><td><code>string|function</code><td>optional<td>The name or function that representing which cache store to use. By default <code>memory</code> store provider is used. Available options: <code>memory</code>, <code>memcached</code>, <code>redis</code>.<tr><td><code>connection</code><td><code>object</code><td>optional<td>The store specific connection options, if any. e.g. <code>redis</code> requires a host and a port to be set because we need that information when accessing <code>redis</code>, while <code>MemoryStore</code> do not require any further options.<tr><td><code>options</code><td><code>object</code><td>optional<td>The store-specific options, read more in corresponding section.<tr><td><code>ttl</code><td><code>number</code><td>optional<td>Time To Live. The amount of time (<i>in seconds</i>) after which the stored resource data will be considered expired. By default, if not set, will be equal to 300 seconds.<tr><td><code>tti</code><td><code>number</code><td>optional<td>Time To Idle. If this amount of time has passed after the resource was last accessed, it will be considered expired. By default, if not set, will be equal to 300 seconds.</table><hr><p><a name="memory"></a></p><h3 id="in-memory-cache">In Memory Cache</h3><p>In memory cache provider, this is the defaut provider. This will use the available memory in the javascript runtime. This should only be used if your applcation is using a single Node.JS process.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">var cacheOptions = {
  store: &#39;memory&#39;,
  ttl: 300,
  tti: 300
};

var client = new stormpath.Client({
  apiKey: apiKey,
  cacheOptions: cacheOptions
});</code></pre><h4 id="in-memory-options">In-memory options</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>store</code><td><code>string</code><td><strong>required</strong><td>String that must equal <code>memory</code><tr><td><code>ttl</code><td><code>number</code><td>optional<td>Time To Live. The amount of time (<i>in seconds</i>) after which the stored resource data will be considered expired. By default, if not set, will be equal to 300 seconds.<tr><td><code>tti</code><td><code>number</code><td>optional<td>Time To Interact. If this amount of time has passed after the resource was last accessed, it will be considered expired. By default, if not set, will be equal to 300 seconds.</table><hr><hr><p><a name="memcached"></a></p><h3 id="memcached">Memcached</h3><p>Memcached provider, use this option if you wish to use Memcahed as your cache storage.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">var cacheOptions = {
  store: &#39;memcached&#39;,
  connection: &#39;127.0.0.1:11211&#39;,
  client: { /* optional - pass your own Memcached client instance */},
  options: {
    poolSize: 10
  },
  ttl: 300,
  tti: 300
};

var client = new stormpath.Client({
  apiKey: apiKey,
  cacheOptions: cacheOptions
});</code></pre><h4 id="memcached-options">Memcached options</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>store</code><td><code>string|function</code><td><strong>required</strong><td>Should be equal to string <code>&#39;memcached&#39;</code> or reference to <code>MemcachedStore</code> constructor function.<tr><td><code>client</code><td><code>object</code><td>optional<td>An instnace of <code>Memcached</code>, useful if you want to use an already-instantiated Memcached client<tr><td><code>connection</code><td><code>object</code>,<code>string</code>,<code>array</code><td>optional<td>Passed to <code>new Memcached(<strong>Server locations</strong>, options);</code>.<tr><td><code>options</code><td><code>object</code><td>optional<td><p>Passed to <code>new Memcached(Server locations, <strong>options</strong>);</code>.</p><p>See the <a href="https://github.com/3rd-Eden/node-memcached" target="_blank">node-memcached docmenation</a> for complete option list.</p><p></p><tr><td><code>ttl</code><td><code>number</code><td>optional<td>Time To Live. The amount of time (<i>in seconds</i>) after which the stored resource data will be considered expired. By default, if not set, will be equal to 300 seconds.<tr><td><code>tti</code><td><code>number</code><td>optional<td>Time To Interact. If this amount of time has passed after the resource was last accessed, it will be considered expired. By default, if not set, will be equal to 300 seconds.</table><hr><p><a name="redis"></a></p><h3 id="redis">Redis</h3><p>Redis provider, use this option if you wish to use Redis as your cache storage.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">var cacheOptions = {
  store: &#39;redis&#39;,
  client: { /* optional - pass your own Redis client instance */},
  connection: {
    host: &#39;localhost&#39;,
    port: 6379
  },
  options: {
    return_buffers: false
  },
  ttl: 300,
  tti: 300
};

var client = new stormpath.Client({
  apiKey: apiKey,
  cacheOptions: cacheOptions
});</code></pre><h4 id="cache-options-parameters">Cache options Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>store</code><td><code>string|function</code><td><strong>required</strong><td>Should be equal to string <code>&#39;redis&#39;</code> or reference to <code>RedisStore</code> constructor function.<tr><td><code>client</code><td><code>object</code><td>optional<td>An instnace of a Redis client, useful if you want to use an already-instantiated Redis client<tr><td><code>connection</code><td><code>object</code><td>optional<td>An object that allows you to specity <code>host</code> or <code>port</code>, as strings, for your redis connection. This is is passed to <code>redis.createClient(<strong>host</strong>, <strong>port</strong>, options)</code> and will default to 127.0.0.1 and 6379 if not provided.<tr><td><code>options</code><td><code>object</code><td>optional<td><p>Options object that will be passed to <code>redis.createClient(host, port, <strong>options</strong>)</code>.</p><p>See the <a href="https://github.com/mranney/node_redis" target="_blank">node-redis docmenation</a> for complete option list.</p><tr><td><code>ttl</code><td><code>number</code><td>optional<td>Time To Live. The amount of time (<i>in seconds</i>) after which the stored resource data will be considered expired. By default, if not set, will be equal to 300 seconds.<tr><td><code>tti</code><td><code>number</code><td>optional<td>Time To Interact. If this amount of time has passed after the resource was last accessed, it will be considered expired. By default, if not set, will be equal to 300 seconds.</table><hr><p><a name="customNonceStore"></a></p><h3 id="custom-nonce-store">Custom Nonce Store</h3><p>If you are using the <a href="http://docs.stormpath.com/guides/using-id-site">ID Site Feature</a> in your Stormpath implementation, the calls to <a href="application#createIdSiteUrl">Application.createIdSiteUrl()</a> and <a href="application#handleIdSiteCallback">Application.handleIdSiteCallback()</a> will make use of a nonce value to prevent replay attacks. By default these nonces will be stored in a cache region in the client&#39;s data store.</p><p>You may use your own Nonce Store by providing an interface object that we can use to communicate with it. Your interface object must have these two methods:</p><ul><li><code>getNonce(nonceStringValue,callback)</code> - It will search your nonce store for the nonce value and then call the callback with with the <code>(err,value)</code> pattern, where <code>err</code> indicates a problem with the store and <code>value</code> is the found nonce or <code>null</code></li><li><code>putNonce(nonceStringValue,callback)</code> - It should place the nonce value in your nonce store and then call the callback with <code>(err)</code> where <code>err</code> is a store error or <code>null</code></li></ul><p>You then pass this object to the stormpath client constructor as the <code>nonceStore</code> option.</p><hr><p><a name="createApplication"></a></p><h3 id="-span-class-member-method-span-createapplication-application-options-callback-"><span class="member">method</span> createApplication(application, <em>[options,]</em> callback)</h3><p>Creates a new <a href="application">Application</a> instance in the Client&#39;s <a href="tenant">Tenant</a>.</p><h4 id="usage">Usage</h4><p>Create a new Application with its own private Directory so you can start adding user accounts right away:</p><pre><code class="lang-javascript">var app = {
  name: &#39;My Awesome App&#39;,
  description: &#39;Srsly. Awesome.&#39;
};

client.createApplication(app, { createDirectory: true }, function(err, newApp) {
  console.log(newApp);
});</code></pre><p>Create a new Application without any mapped user account stores. You are responsible for adding account stores later if you want to be able to create new user accounts via the application directly. Notice there is no <em>options</em> param:</p><pre><code class="lang-javascript">var app = {
  name: &#39;My Awesome App&#39;,
  description: &#39;Srsly. Awesome.&#39;
};

client.createApplication(app, function(err, newApp) {
  console.log(newApp);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>application</code><td><code>object</code><td>required<td>The application&#39;s name/value fields.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>An object literal of name/value pairs to use as <a href="http://docs.stormpath.com/rest/product-guide/#create-an-application-aka-register-an-application-with-stormpath">query parameters</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon server response. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the newly created <a href="application">Application</a> resource returned from the server.</table><h4 id="returns">Returns</h4><p>The created <code>Application</code> returned from the server will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="createDirectory"></a></p><h3 id="-span-class-member-method-span-createdirectory-directory-options-callback-"><span class="member">method</span> createDirectory(directory, <em>[options,]</em> callback)</h3><p>Creates a new <a href="directory">Directory</a> instance in the Client&#39;s <a href="tenant">Tenant</a>.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">var dir = {
  name: &#39;Employees Directory&#39;,
  description: &#39;Only Employee accounts in here please.&#39;
};

client.createDirectory(dir, function(err, newDir) {
  console.log(newDir);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><tr><td><code>directory</code><td><code>object</code><td>required<td>The directory&#39;s name/value fields.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>An object literal of name/value pairs to use as query parameters, for example, to <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">expand</a> any of the returned directory&#39;s linked resources.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon server response. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the newly created <a href="directory">Directory</a> resource returned from the server.</table><h4 id="returns">Returns</h4><p>The created <code>Directory</code> returned from the server will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getAccount"></a></p><h3 id="-span-class-member-method-span-getaccount-accounthref-options-callback-"><span class="member">method</span> getAccount(accountHref, <em>[options,]</em> callback)</h3><p>Retrieves the <a href="account">Account</a> resource at <code>accountHref</code> and provides it to the specified <code>callback</code>.</p><p><strong>NOTE</strong>: This implementation does not validate that the returned resource is an <code>Account</code>: it is assumed that the caller knows the <code>href</code> represents an account location.</p><h4 id="usage">Usage</h4><p>For an <code>href</code> that you know represents an account:</p><pre><code class="lang-javascript">client.getAccount(href, function(err, account) {
  console.log(account);
});</code></pre><p>You can specify query parameters as the <strong>options</strong> argument, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a>:</p><pre><code class="lang-javascript">client.getAccount(href, { expand: &#39;customData&#39; }, function(err, account) {
  console.log(account);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>accountHref</code><td><code>string</code><td>required<td>The href <em>known</em> to point to an existing Account resource.<tr><td><em><code>options</code></em><td><code>object&gt;</code><td><em>optional</em><td>An object literal of name/value pairs to use as query parameters, for example, <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="account">Account</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>Account</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getApplication"></a></p><h3 id="-span-class-member-method-span-getapplication-applicationhref-options-callback-"><span class="member">method</span> getApplication(applicationHref, <em>[options,]</em> callback)</h3><p>Retrieves the <a href="application">Application</a> resource at <code>applicationHref</code> and provides it to the specified <code>callback</code>.</p><p><strong>NOTE</strong>: This implementation does not validate that the returned resource is an <code>Application</code>: it is assumed that the caller knows the <code>applicationHref</code> represents an application location.</p><h4 id="usage">Usage</h4><p>For an <code>applicationHref</code> that you know represents an application:</p><pre><code class="lang-javascript">client.getApplication(href, function(err, app) {
  console.log(app);
});</code></pre><p>You can specify query parameters as the <strong>options</strong> argument, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a>:</p><pre><code class="lang-javascript">client.getApplication(href, { expand: &#39;accounts&#39; }, function(err, app) {
  console.log(app);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>applicationHref</code><td><code>string</code><td>required<td>The href <em>known</em> to point to an existing Application resource.<tr><td><em><code>options</code></em><td><code>object&gt;</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="application">Application</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>Application</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getApplications"></a></p><h3 id="-span-class-member-method-span-getapplications-options-callback-"><span class="member">method</span> getApplications(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of <a href="tenant">Tenant</a> <a href="application">Application</a>s and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the client tenant&#39;s applications are retrieved. If options (<em>query parameters</em>) are specified for a search, only those applications matching the search will be retrieved. If the search does not return any results, the collection will be empty.</p><h4 id="usage">Usage</h4><p>If you want to retrieve <em>all</em> of your tenant&#39;s applications:</p><pre><code class="lang-javascript">client.getApplications(function(err, applications) {

  applications.each(function(app, cb) {
    console.log(app);
    cb();
  }, function(err) {
    console.log(&#39;Finsihed iterating over applications.&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">Collection</a> provided to the <code>callback</code> has an <code>each</code> function that accepts its own callback. The collection will iterate over all of the applications in the collection, and invoke the callback for each one.</p><p>If you don&#39;t want all applications, and only want specific ones, you can search for them by specifying the <em>options</em> argument with <a href="http://docs.stormpath.com/rest/product-guide/#tenant-applications-search" title="Stormpath Application Search">application search</a> query parameters:</p><pre><code class="lang-javascript">client.getApplications({ name: &#39;*Awesome*&#39; }, function(err, apps) {
  applications.each(function(app, cb) {
    console.log(app);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over applications.&#39;);
  });
});</code></pre><p>The above code example would only print out applications with the text fragment <code>Awesome</code> in their name. See the Stormpath <a href="http://docs.stormpath.com/rest/product-guide/#tenant-applications-search" title="Stormpath Application Search">application search documentation</a> for other supported query parameters, such as reference expansion.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#application-retrieve">resource expansion</a> or for <a href="http://docs.stormpath.com/rest/product-guide/#tenant-applications-search">searching for applications</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">CollectionResource</a> containing zero or more <a href="application">Application</a> resource instances.</table><h4 id="returns">Returns</h4><p>The retrieved collection of <code>Application</code>s will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getCurrentTenant"></a></p><h3 id="-span-class-member-method-span-getcurrenttenant-options-callback-"><span class="member">method</span> getCurrentTenant(<em>[options,]</em> callback)</h3><p>Retrieves the client&#39;s <a href="tenant">Tenant</a> and provides it to the specified <code>callback</code>.</p><h4 id="usage">Usage</h4><pre><code class="lang-javascript">client.getCurrentTenant(function(err, tenant) {
  console.log(tenant);
});</code></pre><p>You can also use <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a> options (query params) to obtain linked resources in the same request:</p><pre><code class="lang-javascript">client.getCurrentTenant({ expand:&#39;applications&#39; }, function(err, tenant) {
  console.log(tenant);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/latest/reference.html#links">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="tenant">Tenant</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>Tenant</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getDirectories"></a></p><h3 id="-span-class-member-method-span-getdirectories-options-callback-"><span class="member">method</span> getDirectories(<em>[options,]</em> callback)</h3><p>Retrieves a <a href="collectionResource">collection</a> of <a href="tenant">Tenant</a> <a href="directory">Directories</a> and provides the collection to the specified <code>callback</code>.</p><p>If no options are specified, all of the client tenant&#39;s directories are retrieved. If options (<em>query parameters</em>) are specified for a search, only those directories matching the search will be retrieved. If the search does not return any results, the collection will be empty.</p><h4 id="usage">Usage</h4><p>If you want to retrieve <em>all</em> of your tenant&#39;s directories:</p><pre><code class="lang-javascript">client.getDirectories(function(err, directories) {
  directories.each(function(dir, cb) {
    console.log(dir);
    cb();
  }, function(err) {
    console.log(&#39;Finished iterating over directories.&#39;);
  });
});</code></pre><p>As you can see, the <a href="collectionResource">Collection</a> provided to the <code>callback</code> has an <code>each</code> function that accepts its own callback. The collection will iterate over all of the directories in the collection, and invoke the callback for each one.</p><p>If you don&#39;t want all directories, and only want specific ones, you can search for them by specifying the <em>options</em> argument with <a href="http://docs.stormpath.com/rest/product-guide/#tenant-directories-search" title="Stormpath Directory Search">directory search</a> query parameters:</p><pre><code class="lang-javascript">client.getDirectories({ name: &#39;*foo*&#39; }, function(err, directories) {
  directories.each(function(dir, cb) {
    console.log(dir);
    cb();
  }, function(err) {
    console.log(&#39;Finsihed iterating over directories.&#39;);
  });
});</code></pre><p>The above code example would only print out directories with the text fragment <code>foo</code> in their name. See the Stormpath <a href="http://docs.stormpath.com/rest/product-guide/#tenant-directories-search" title="Stormpath Directory Search">directory search documentation</a> for other supported query parameters, such as reference expansion.</p><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#retrieve-a-directory">resource expansion</a> or for <a href="http://docs.stormpath.com/rest/product-guide/#tenant-directories-search">searching for directories</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is a <a href="collectionResource">CollectionResource</a> containing zero or more <a href="directory">Directory</a> resource instances.</table><h4 id="returns">Returns</h4><p>The retrieved collection of <code>Directory</code> resources will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getDirectory"></a></p><h3 id="-span-class-member-method-span-getdirectory-directoryhref-options-callback-"><span class="member">method</span> getDirectory(directoryHref, <em>[options,]</em> callback)</h3><p>Retrieves the <a href="directory">Directory</a> resource at <code>directoryHref</code> and provides it to the specified <code>callback</code>.</p><p><strong>NOTE</strong>: This implementation does not validate that the returned resource is a <code>Directory</code>: it is assumed that the caller knows the <code>directoryHref</code> represents a directory location.</p><h4 id="usage">Usage</h4><p>For a <code>directoryHref</code> that you know represents a directory:</p><pre><code class="lang-javascript">client.getDirectory(href, function(err, dir) {
  console.log(dir);
});</code></pre><p>You can specify query parameters as the <strong>options</strong> argument, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a>:</p><pre><code class="lang-javascript">client.getDirectory(href, { expand: &#39;accounts&#39; }, function(err, dir) {
  console.log(dir);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>directoryHref</code><td><code>string</code><td>required<td>The href <em>known</em> to point to an existing Directory resource.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#retrieve-a-directory">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="directory">Directory</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>Directory</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getGroup"></a></p><h3 id="-span-class-member-method-span-getgroup-grouphref-options-callback-"><span class="member">method</span> getGroup(groupHref, <em>[options,]</em> callback)</h3><p>Retrieves the <a href="group">Group</a> resource at <code>groupHref</code> and provides it to the specified <code>callback</code>.</p><p><strong>NOTE</strong>: This implementation does not validate that the returned resource is a <code>Group</code>: it is assumed that the caller knows the <code>groupHref</code> represents a group location.</p><h4 id="usage">Usage</h4><p>For a <code>groupHref</code> that you know represents a group:</p><pre><code class="lang-javascript">client.getGroup(href, function(err, group) {
  console.log(group);
});</code></pre><p>You can specify query parameters as the <strong>options</strong> argument, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a>:</p><pre><code class="lang-javascript">client.group(href, { expand: &#39;accounts&#39; }, function(err, group) {
  console.log(group);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>groupHref</code><td><code>string</code><td>required<td>The href <em>known</em> to point to an existing Group resource.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#retrieve-a-group">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="group">Group</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>Group</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p><hr><p><a name="getGroupMembership"></a></p><h3 id="-span-class-member-method-span-getgroupmembership-href-options-callback-"><span class="member">method</span> getGroupMembership(href, <em>[options,]</em> callback)</h3><p>Retrieves the <a href="groupMembership">GroupMembership</a> resource at <code>href</code> and provides it to the specified <code>callback</code>.</p><p><strong>NOTE</strong>: This implementation does not validate that the returned resource is a <code>GroupMembership</code>: it is assumed that the caller knows the <code>href</code> represents a group location.</p><h4 id="usage">Usage</h4><p>For an <code>href</code> that you know represents a GroupMembership:</p><pre><code class="lang-javascript">client.getGroupMembership(href, function(err, membership) {
  console.log(membership);
});</code></pre><p>You can specify query parameters as the <strong>options</strong> argument, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#account-retrieve" title="Stormpath Resource Expansion">resource expansion</a>:</p><pre><code class="lang-javascript">client.getGroupMembership(href, { expand: &#39;account,group&#39; }, function(err, membership) {
  console.log(membership);
});</code></pre><h4 id="parameters">Parameters</h4><table class="table table-striped table-hover table-curved"><thead><tr><th>Parameter<th>Type<th>Presence<th>Description<th><tbody><tr><td><code>href</code><td><code>string</code><td>required<td>The href <em>known</em> to point to an existing GroupMembership resource.<tr><td><em><code>options</code></em><td><code>object</code><td><em>optional</em><td>Name/value pairs to use as query parameters, for example, for <a href="http://docs.stormpath.com/rest/product-guide/#retrieve-a-group-membership">resource expansion</a>.<tr><td><code>callback</code><td>function<td>required<td>The callback to execute upon resource retrieval. The 1st parameter is an <code>Error</code> object. The 2nd parameter is the retrieved <a href="groupMembership">GroupMembership</a> resource.</table><h4 id="returns">Returns</h4><p>The retrieved <code>GroupMembership</code> resource will be provided to the <code>callback</code> as the callback&#39;s second parameter.</p>
